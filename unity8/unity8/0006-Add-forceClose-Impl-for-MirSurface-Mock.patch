From 8155036d0a9dd684d3066ead0db2281dd3c8044d Mon Sep 17 00:00:00 2001
From: Marius Gripsgard <marius@ubports.com>
Date: Sun, 30 Jun 2019 23:21:58 +0200
Subject: [PATCH 6/6] Add forceClose Impl for MirSurface Mock

---
 tests/mocks/Unity/Application/MirSurface.h          | 1 +
 tests/plugins/Unity/Launcher/launchermodeltest.cpp  | 1 +
 tests/plugins/WindowManager/UnityApplicationMocks.h | 1 +
 3 files changed, 3 insertions(+)

diff --git a/tests/mocks/Unity/Application/MirSurface.h b/tests/mocks/Unity/Application/MirSurface.h
index fa15ed6fc..9480eb3aa 100644
--- a/tests/mocks/Unity/Application/MirSurface.h
+++ b/tests/mocks/Unity/Application/MirSurface.h
@@ -103,6 +103,7 @@ public:
     unity::shell::application::MirSurfaceListInterface* childSurfaceList() const override;
 
     Q_INVOKABLE void close() override;
+    Q_INVOKABLE void forceClose() override { }
     Q_INVOKABLE void activate() override;
 
     ////
diff --git a/tests/plugins/Unity/Launcher/launchermodeltest.cpp b/tests/plugins/Unity/Launcher/launchermodeltest.cpp
index 9d0908b36..49226d1ec 100644
--- a/tests/plugins/Unity/Launcher/launchermodeltest.cpp
+++ b/tests/plugins/Unity/Launcher/launchermodeltest.cpp
@@ -75,6 +75,7 @@ public:
     MirSurfaceInterface* parentSurface() const override { return nullptr; }
     MirSurfaceListInterface* childSurfaceList() const override { return nullptr; }
     void close() override {}
+    void forceClose() override {}
     void activate() override {}
     void requestState(Mir::State) override {}
 
diff --git a/tests/plugins/WindowManager/UnityApplicationMocks.h b/tests/plugins/WindowManager/UnityApplicationMocks.h
index 2356179d1..f2cbf5e95 100644
--- a/tests/plugins/WindowManager/UnityApplicationMocks.h
+++ b/tests/plugins/WindowManager/UnityApplicationMocks.h
@@ -65,6 +65,7 @@ public:
     MirSurfaceInterface* parentSurface() const override { return nullptr; }
     unity::shell::application::MirSurfaceListInterface* childSurfaceList() const override { return nullptr; }
     void close() override {}
+    void forceClose() override {}
     void activate() override {}
 
 public Q_SLOTS:
-- 
2.24.0

