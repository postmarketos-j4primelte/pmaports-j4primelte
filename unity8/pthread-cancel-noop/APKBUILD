pkgname=pthread-cancel-noop
pkgver=1
pkgrel=0
pkgdesc="no-op for pthread_cancel(3)"
url="https://postmarketos.org"
arch="all"
license="MIT"
source="inject.c"
builddir="$srcdir"

build() {
	gcc -shared -fPIC -o inject.so inject.c
}

package() {
	install -Dm644 inject.so \
		"$pkgdir"/usr/lib/preload/pthread_cancel_noop.so
}
sha512sums="582da818005b0b4e70d1095caeff0e6883230e85619a7f8972e4fb7bde3ac46007e516112e6436b5e2c71a16a91c9aaa460bdbcba51b94ec077548be9bb2037d  inject.c"
